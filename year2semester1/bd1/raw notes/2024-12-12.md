---
created: 2024-12-12
done ?: "- [ ]"
updated: 2024-12-12T13:45
---
record puntati …

ogni tanto bisogna fare operazioni d book-keeping per riordinare l’indice (credo)

indice secondario : indice denso su un’altra chiave
indice denso: record indice per ogni record del file pricinpale (diverso da: indice sparso (indice principale))
- in caso voglio ordinare anche su un’altra chiave (che deve essere comunque univoca ??? )
- anche questo è un indice fatto a blocchi
- posso fare la ricerca binaria (sempre sull’indice secondario)
- questo è un esempio di file con record puntati: non posso più spostate i record
>[!example] esempio1
supponiamo di avere un file con 150000 record. ogni record occupa 250 byte, di cui 50 per il campo chiave. ogni blocco contiene 1024 byte. un puntatore a blocco occupa 4 byte.
**a) se usaimo un indice ISAM sparso, e assumiamo che i record non siano puntati e che il fattore di utilizzo dei blocchi del file principale sia 0,8 (cioè i blocchi non sono completamente pieni, ma pieni al più 70%), quanti blocchi dobbiamo utilizzare per l’indice ?**
**b) se usiamo un indice ISAM sparso, e assumiamo che i record siano puntati e che i blocchi del file principale siano pieni, quanti blocchi dobbiamo utilizzare per l’indice ?**
**c)se utilizziamo la ricerca binaria, quale e il numero massimo di accessi a blocco per ricercare un record presente nel file nei casi a) e b), supponendo nel caso b) di non avere liste di overflow ? **

per sapere quanti blocchi servono per l’indice, dobbiamo sapere quanti blocchi occupa il file principale. 
$\frac{70}{100}\cdot 1024 = 716$
$\frac{716}{250} = 2,86 = 2$ (parte intera inferiore) (2 record per blocco)
$\frac{150.000}{2} = 75.000$
ogni record del file indice ha dimensione 
se non specificato diversamente, i blocchi sono pieni per intero

al più il 70%: in questo caso devo prendere la parte intera inferiore dopo aver calcolato qual’è il 70% dello spazio.